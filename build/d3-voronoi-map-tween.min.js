!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-weighted-voronoi"),require("flubber")):"function"==typeof define&&define.amd?define(["exports","d3-weighted-voronoi","flubber"],n):n(t.d3=t.d3||{},t.d3,t.flubber)}(this,function(t,n,e){"use strict";function i(t,e){function i(t){return Math.pow(t,2)}function g(t,n){return i(n[0]-t[0])+i(n[1]-t[1])}function u(t,n,e){return(1-e)*t+e*n}function c(){const t=y.state().polygons,n=w.state().polygons,e=t.map(function(t){return t.site}),i=n.map(function(t){return t.site});var g;T={},e.forEach(function(t){g=D(t.originalObject.data.originalData),T[g]=t,O.add(g)}),j={},i.forEach(function(t){g=E(t.originalObject.data.originalData),j[g]=t,O.add(g)});var u,c,l,f,s,h,p,b,x,Y,_,S,X;v=[],O.forEach(function(e){u=T[e],p=j[e],u&&p?(c=u.originalObject.data.originalData,b=p.originalObject.data.originalData,l=u.x,x=p.x,f=u.y,Y=p.y,s=u.weight,_=p.weight,h=u.originalObject.data.weight,S=p.originalObject.data.weight,X=r):p?(c=null,b=p.originalObject.data.originalData,l=p.x,x=p.x,f=p.y,Y=p.y,s=d(p,t),_=p.weight,h=0,S=p.originalObject.data.weight,X=a):(c=u.originalObject.data.originalData,b=null,l=u.x,x=u.x,f=u.y,Y=u.y,s=u.weight,_=d(u,n),h=u.originalObject.data.weight,S=0,X=o),v.push({startingData:c,endingData:b,key:e,startingX:l,endingX:x,startingY:f,endingY:Y,startingWeight:s,endingWeight:_,startingDataWeight:h,endingDataWeight:S,tweenType:X})}),W=!1}function d(t,n){var e,i=1/0,a=null;n.forEach(function(n){e=g([n.site.x,n.site.y],[t.x,t.y]),e<i&&(i=e,a=n)});const r=a.site;var o=-(1/0);a.forEach(function(t){e=g([r.x,r.y],t),e>o&&(o=e)});const u=-o+r.weight;return u}const l=function(t){return t.id},f=function(t){return t.interpolatedSiteX},s=function(t){return t.interpolatedSiteY},h=function(t){return t.interpolatedSiteWeight},p=function(t){return y.clip()};var y=t,w=e,b=p,D=l,E=l,x=n.weightedVoronoi().x(f).y(s).weight(h),W=!0,T={},j={},O=new Set,v=[];const Y={mapInterpolator:function(){return function(t){W&&c();const n=v.map(function(n){return{key:n.key,startingData:n.startingData,endingData:n.endingData,interpolatedSiteX:u(n.startingX,n.endingX,t),interpolatedSiteY:u(n.startingY,n.endingY,t),interpolatedSiteWeight:u(n.startingWeight,n.endingWeight,t),interpolatedDataWeight:u(n.startingDataWeight,n.endingDataWeight,t),tweenType:n.tweenType}});return x.clip(b(t))(n)}},clipInterpolator:function(t){return arguments.length?(b=t,W=!0,Y):b},startingKey:function(t){return arguments.length?(D=t,W=!0,Y):D},endingKey:function(t){return arguments.length?(E=t,W=!0,Y):E}};return Y}const a="enter",r="update",o="exit";t.voronoiMapTween=i,t.ENTER_TWEEN_TYPE=a,t.UPDATE_TWEEN_TYPE=r,t.EXIT_TWEEN_TYPE=o,Object.defineProperty(t,"__esModule",{value:!0})});