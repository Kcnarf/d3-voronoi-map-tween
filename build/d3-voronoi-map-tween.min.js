!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-weighted-voronoi"),require("d3-polygon")):"function"==typeof define&&define.amd?define(["exports","d3-weighted-voronoi","d3-polygon"],n):n(t.d3=t.d3||{},t.d3,t.d3)}(this,function(t,n,e){"use strict";function i(t,i){function g(t){return Math.pow(t,2)}function u(t,n){return g(n[0]-t[0])+g(n[1]-t[1])}function d(t){O&&c();var n=Y.map(function(n){return{key:n.key,startingData:n.startingData,endingData:n.endingData,interpolatedX:f(n.startingX,n.endingX,t),interpolatedY:f(n.startingY,n.endingY,t),interpolatedWeight:f(n.startingWeight,n.endingWeight,t),interpolatedValue:f(n.startingValue,n.endingValue,t),tweenType:n.tweenType}});return v(n)}function c(){w=j.clip(),v.clip(w);var t,n=j.state().polygons,e=D.state().polygons,i=n.map(function(t){return t.site}),g=e.map(function(t){return t.site});V={},i.forEach(function(n){t=x(n.originalObject.data.originalData),V[t]=n,X.add(t)}),W={},g.forEach(function(n){t=b(n.originalObject.data.originalData),W[t]=n,X.add(t)});var u,d,c,f,p,s,h,y,m,E,T,k,M;Y=[],X.forEach(function(t){u=V[t],h=W[t],u&&h?(d=u.originalObject.data.originalData,y=h.originalObject.data.originalData,c=u.x,m=h.x,f=u.y,E=h.y,p=u.weight,T=h.weight,s=u.originalObject.data.weight,k=h.originalObject.data.weight,M=r):h?(d=null,y=h.originalObject.data.originalData,c=h.x,m=h.x,f=h.y,E=h.y,p=l(h,n),T=h.weight,s=0,k=h.originalObject.data.weight,M=a):(d=u.originalObject.data.originalData,y=null,c=u.x,m=u.x,f=u.y,E=u.y,p=u.weight,T=l(u,e),s=u.originalObject.data.weight,k=0,M=o),Y.push({startingData:d,endingData:y,key:t,startingX:c,endingX:m,startingY:f,endingY:E,startingWeight:p,endingWeight:T,startingValue:s,endingValue:k,tweenType:M})}),O=!1}function l(t,n){var i=null;n.forEach(function(n){i||e.polygonContains(n,[t.x,t.y])&&(i=n)});var a,r=i.site,o=-(1/0);i.forEach(function(t){a=u([r.x,r.y],t),a>o&&(o=a)});var g=-o+r.weight;return g}function f(t,n,e){return(1-e)*t+e*n}const p=function(t){return t.id},s=function(t){return t.interpolatedX},h=function(t){return t.interpolatedY},y=function(t){return t.interpolatedWeight};var w,x=p,b=p,j=t,D=i,v=n.weightedVoronoi().x(s).y(h).weight(y),O=!0,V={},W={},X=new Set,Y=[];return d.startingKey=function(t){return arguments.length?(x=t,O=!0,d):x},d.endingKey=function(t){return arguments.length?(b=t,O=!0,d):b},d}const a="enter",r="update",o="exit";t.voronoiMapTween=i,Object.defineProperty(t,"__esModule",{value:!0})});