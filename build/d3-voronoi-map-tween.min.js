!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-weighted-voronoi"),require("d3-polygon")):"function"==typeof define&&define.amd?define(["exports","d3-weighted-voronoi","d3-polygon"],n):n(t.d3=t.d3||{},t.d3,t.d3)}(this,function(t,n,e){"use strict";function i(t,i){function g(t){return Math.pow(t,2)}function u(t,n){return g(n[0]-t[0])+g(n[1]-t[1])}function d(t){j&&c();var n=Y.map(function(n){return{key:n.key,startingData:n.startingData,endingData:n.endingData,interpolatedX:f(n.startingX,n.endingX,t),interpolatedY:f(n.startingY,n.endingY,t),interpolatedWeight:f(n.startingWeight,n.endingWeight,t),interpolatedValue:f(n.startingValue,n.endingValue,t),tweenType:n.tweenType}});return b(n)}function c(){w=D.clip(),b.clip(w);var t,n=D.state().polygons,e=T.state().polygons,i=n.map(function(t){return t.site}),g=e.map(function(t){return t.site});v={},i.forEach(function(n){t=E(n.originalObject.data.originalData),v[t]=n,W.add(t)}),O={},g.forEach(function(n){t=x(n.originalObject.data.originalData),O[t]=n,W.add(t)});var u,d,c,f,p,s,h,y,_,X,V,m,P;Y=[],W.forEach(function(t){u=v[t],h=O[t],u&&h?(d=u.originalObject.data.originalData,y=h.originalObject.data.originalData,c=u.x,_=h.x,f=u.y,X=h.y,p=u.weight,V=h.weight,s=u.originalObject.data.weight,m=h.originalObject.data.weight,P=r):h?(d=null,y=h.originalObject.data.originalData,c=h.x,_=h.x,f=h.y,X=h.y,p=l(h,n),V=h.weight,s=0,m=h.originalObject.data.weight,P=a):(d=u.originalObject.data.originalData,y=null,c=u.x,_=u.x,f=u.y,X=u.y,p=u.weight,V=l(u,e),s=u.originalObject.data.weight,m=0,P=o),Y.push({startingData:d,endingData:y,key:t,startingX:c,endingX:_,startingY:f,endingY:X,startingWeight:p,endingWeight:V,startingValue:s,endingValue:m,tweenType:P})}),j=!1}function l(t,n){var i=null;n.forEach(function(n){i||e.polygonContains(n,[t.x,t.y])&&(i=n)});var a,r=i.site,o=-(1/0);i.forEach(function(t){a=u([r.x,r.y],t),a>o&&(o=a)});var g=-o+r.weight;return g}function f(t,n,e){return(1-e)*t+e*n}const p=function(t){return t.id},s=function(t){return t.interpolatedX},h=function(t){return t.interpolatedY},y=function(t){return t.interpolatedWeight};var w,E=p,x=p,D=t,T=i,b=n.weightedVoronoi().x(s).y(h).weight(y),j=!0,v={},O={},W=new Set,Y=[];return d.startingKey=function(t){return arguments.length?(E=t,j=!0,d):E},d.endingKey=function(t){return arguments.length?(x=t,j=!0,d):x},d}const a="enter",r="update",o="exit";t.voronoiMapTween=i,t.ENTER_TWEEN_TYPE=a,t.UPDATE_TWEEN_TYPE=r,t.EXIT_TWEEN_TYPE=o,Object.defineProperty(t,"__esModule",{value:!0})});