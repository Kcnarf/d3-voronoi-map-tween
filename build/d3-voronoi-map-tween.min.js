!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-weighted-voronoi"),require("d3-polygon")):"function"==typeof define&&define.amd?define(["exports","d3-weighted-voronoi","d3-polygon"],n):n(t.d3=t.d3||{},t.d3,t.d3)}(this,function(t,n,e){"use strict";function i(t,i){function g(t){return Math.pow(t,2)}function d(t,n){return g(n[0]-t[0])+g(n[1]-t[1])}function u(t,n,e){return(1-e)*t+e*n}function c(t){b&&l();var n=Y.map(function(n){return{key:n.key,startingData:n.startingData,endingData:n.endingData,interpolatedSiteX:u(n.startingX,n.endingX,t),interpolatedSiteY:u(n.startingY,n.endingY,t),interpolatedSiteWeight:u(n.startingWeight,n.endingWeight,t),interpolatedDataWeight:u(n.startingDataWeight,n.endingDataWeight,t),tweenType:n.tweenType}});return T(n)}function l(){w=W.clip(),T.clip(w);var t,n=W.state().polygons,e=x.state().polygons,i=n.map(function(t){return t.site}),g=e.map(function(t){return t.site});j={},i.forEach(function(n){t=D(n.originalObject.data.originalData),j[t]=n,O.add(t)}),v={},g.forEach(function(n){t=E(n.originalObject.data.originalData),v[t]=n,O.add(t)});var d,u,c,l,h,p,s,y,_,S,X,m,P;Y=[],O.forEach(function(t){d=j[t],s=v[t],d&&s?(u=d.originalObject.data.originalData,y=s.originalObject.data.originalData,c=d.x,_=s.x,l=d.y,S=s.y,h=d.weight,X=s.weight,p=d.originalObject.data.weight,m=s.originalObject.data.weight,P=r):s?(u=null,y=s.originalObject.data.originalData,c=s.x,_=s.x,l=s.y,S=s.y,h=f(s,n),X=s.weight,p=0,m=s.originalObject.data.weight,P=a):(u=d.originalObject.data.originalData,y=null,c=d.x,_=d.x,l=d.y,S=d.y,h=d.weight,X=f(d,e),p=d.originalObject.data.weight,m=0,P=o),Y.push({startingData:u,endingData:y,key:t,startingX:c,endingX:_,startingY:l,endingY:S,startingWeight:h,endingWeight:X,startingDataWeight:p,endingDataWeight:m,tweenType:P})}),b=!1}function f(t,n){var i=null;n.forEach(function(n){i||e.polygonContains(n,[t.x,t.y])&&(i=n)});var a,r=i.site,o=-(1/0);i.forEach(function(t){a=d([r.x,r.y],t),a>o&&(o=a)});var g=-o+r.weight;return g}const h=function(t){return t.id},p=function(t){return t.interpolatedSiteX},s=function(t){return t.interpolatedSiteY},y=function(t){return t.interpolatedSiteWeight};var w,D=h,E=h,W=t,x=i,T=n.weightedVoronoi().x(p).y(s).weight(y),b=!0,j={},v={},O=new Set,Y=[];return c.startingKey=function(t){return arguments.length?(D=t,b=!0,c):D},c.endingKey=function(t){return arguments.length?(E=t,b=!0,c):E},c}const a="enter",r="update",o="exit";t.voronoiMapTween=i,t.ENTER_TWEEN_TYPE=a,t.UPDATE_TWEEN_TYPE=r,t.EXIT_TWEEN_TYPE=o,Object.defineProperty(t,"__esModule",{value:!0})});