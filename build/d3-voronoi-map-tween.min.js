!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-weighted-voronoi")):"function"==typeof define&&define.amd?define(["exports","d3-weighted-voronoi"],n):n(t.d3=t.d3||{},t.d3)}(this,function(t,n){"use strict";function e(t,e){function o(t){return Math.pow(t,2)}function g(t,n){return o(n[0]-t[0])+o(n[1]-t[1])}function u(t,n,e){return(1-e)*t+e*n}function c(){const t=y.map(function(t){return t.site}),n=w.map(function(t){return t.site});var e;j={},t.forEach(function(t){e=x(t.originalObject.data.originalData),j[e]=t,v.add(e)}),O={},n.forEach(function(t){e=W(t.originalObject.data.originalData),O[e]=t,v.add(e)});var o,g,u,c,l,f,s,h,p,D,E,T,_;Y=[],v.forEach(function(t){o=j[t],s=O[t],o&&s?(g=o.originalObject.data.originalData,h=s.originalObject.data.originalData,u=o.x,p=s.x,c=o.y,D=s.y,l=o.weight,E=s.weight,f=o.originalObject.data.weight,T=s.originalObject.data.weight,_=a):s?(g=null,h=s.originalObject.data.originalData,u=s.x,p=s.x,c=s.y,D=s.y,l=d(s,y),E=s.weight,f=0,T=s.originalObject.data.weight,_=i):(g=o.originalObject.data.originalData,h=null,u=o.x,p=o.x,c=o.y,D=o.y,l=o.weight,E=d(o,w),f=o.originalObject.data.weight,T=0,_=r),Y.push({startingData:g,endingData:h,key:t,startingX:u,endingX:p,startingY:c,endingY:D,startingWeight:l,endingWeight:E,startingDataWeight:f,endingDataWeight:T,tweenType:_})}),b=!1}function d(t,n){var e,i=1/0,a=null;n.forEach(function(n){e=g([n.site.x,n.site.y],[t.x,t.y]),e<i&&(i=e,a=n)});const r=a.site;var o=-(1/0);a.forEach(function(t){e=g([r.x,r.y],t),e>o&&(o=e)});const u=-o+r.weight;return u}const l=function(t){return t.id},f=function(t){return t.interpolatedSiteX},s=function(t){return t.interpolatedSiteY},h=function(t){return t.interpolatedSiteWeight},p=function(t){return D};var y=t.state().polygons,w=e.state().polygons,D=t.clip(),E=p,x=l,W=l,T=n.weightedVoronoi().x(f).y(s).weight(h),b=!0,j={},O={},v=new Set,Y=[];const _={mapInterpolator:function(){return function(t){b&&c();const n=Y.map(function(n){return{key:n.key,startingData:n.startingData,endingData:n.endingData,interpolatedSiteX:u(n.startingX,n.endingX,t),interpolatedSiteY:u(n.startingY,n.endingY,t),interpolatedSiteWeight:u(n.startingWeight,n.endingWeight,t),interpolatedDataWeight:u(n.startingDataWeight,n.endingDataWeight,t),tweenType:n.tweenType}});return T.clip(E(t))(n)}},clipInterpolator:function(t){return arguments.length?(E=t,b=!0,_):E},startingKey:function(t){return arguments.length?(x=t,b=!0,_):x},endingKey:function(t){return arguments.length?(W=t,b=!0,_):W}};return _}const i="enter",a="update",r="exit";t.voronoiMapTween=e,t.ENTER_TWEEN_TYPE=i,t.UPDATE_TWEEN_TYPE=a,t.EXIT_TWEEN_TYPE=r,Object.defineProperty(t,"__esModule",{value:!0})});