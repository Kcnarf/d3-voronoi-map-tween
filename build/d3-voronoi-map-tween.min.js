!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-weighted-voronoi")):"function"==typeof define&&define.amd?define(["exports","d3-weighted-voronoi"],n):n(t.d3=t.d3||{},t.d3)}(this,function(t,n){"use strict";function e(){function t(t){return Math.pow(t,2)}function e(n,e){return t(e[0]-n[0])+t(e[1]-n[1])}function o(t,n){return c=t,l=n,D=!0,function(t){D&&g();var n=V.map(function(n){return{key:n.key,startingData:n.startingData,endingData:n.endingData,interpolatedX:d(n.startingX,n.endingX,t),interpolatedY:d(n.startingY,n.endingY,t),interpolatedWeight:d(n.startingWeight,n.endingWeight,t),interpolatedValue:d(n.startingValue,n.endingValue,t),tweenType:n.tweenType}});return x(n)}}function g(){f=c.clip(),x.clip(f);var t,n=c.state().polygons,e=l.state().polygons,o=n.map(function(t){return t.site}),g=e.map(function(t){return t.site});b={},o.forEach(function(n){t=key(n.originalObject.data.originalData),b[t]=n,O.add(t)}),j={},g.forEach(function(n){t=key(n.originalObject.data.originalData),j[t]=n,O.add(t)});var d,p,s,h,y,w,v,W,X,Y,k,m,E;V=[],O.forEach(function(t){d=b[t],v=j[t],d&&v?(p=d.originalObject.data.originalData,W=v.originalObject.data.originalData,s=d.x,X=v.x,h=d.y,Y=v.y,y=d.weight,k=v.weight,w=d.originalObject.data.weight,m=v.originalObject.data.weight,E=a):v?(p=null,W=v.originalObject.data.originalData,s=v.x,X=v.x,h=v.y,Y=v.y,y=u(v,n),k=v.weight,w=0,m=W.value,E=i):(p=d.originalObject.data.originalData,W=null,s=d.x,X=d.x,h=d.y,Y=d.y,y=d.weight,k=u(d,e),w=p.value,m=0,E=r),V.push({startingData:p,endingData:W,key:t,startingX:s,endingX:X,startingY:h,endingY:Y,startingWeight:y,endingWeight:k,startingValue:w,endingValue:m,tweenType:E})}),D=!1}function u(t,n){var i=null;n.forEach(function(n){i||d3.polygonContains(n,[t.x,t.y])&&(i=n)});var a,r=i.site,o=-(1/0);i.forEach(function(t){a=e([r.x,r.y],t),a>o&&(o=a)});var g=-o+r.weight;return g}function d(t,n,e){return(1-e)*t+e*n}var c,l,f,p=function(t){return t.id},s=function(t){return t.interpolatedX},h=function(t){return t.interpolatedY},y=function(t){return t.interpolatedWeight},w=p,v=p,x=n.weightedVoronoi().x(s).y(h).weight(y),D=!0,b={},j={},O=new Set,V=[];return o.startingKey=function(t){return arguments.length?(w=t,D=!0,o):w},o.endingKey=function(t){return arguments.length?(v=t,D=!0,o):v},o}const i="enter",a="update",r="exit";t.voronoiMapTween=e,Object.defineProperty(t,"__esModule",{value:!0})});