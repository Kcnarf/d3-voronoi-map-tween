!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-weighted-voronoi"),require("d3-polygon")):"function"==typeof define&&define.amd?define(["exports","d3-weighted-voronoi","d3-polygon"],n):n(t.d3=t.d3||{},t.d3,t.d3)}(this,function(t,n,e){"use strict";function i(t,i){function g(t){return Math.pow(t,2)}function u(t,n){return g(n[0]-t[0])+g(n[1]-t[1])}function d(t,n,e){return(1-e)*t+e*n}function c(){var t,n=w.state().polygons,e=D.state().polygons,i=n.map(function(t){return t.site}),g=e.map(function(t){return t.site});j={},i.forEach(function(n){t=W(n.originalObject.data.originalData),j[t]=n,O.add(t)}),v={},g.forEach(function(n){t=x(n.originalObject.data.originalData),v[t]=n,O.add(t)});var u,d,c,f,h,p,s,y,E,T,_,S,X;Y=[],O.forEach(function(t){u=j[t],s=v[t],u&&s?(d=u.originalObject.data.originalData,y=s.originalObject.data.originalData,c=u.x,E=s.x,f=u.y,T=s.y,h=u.weight,_=s.weight,p=u.originalObject.data.weight,S=s.originalObject.data.weight,X=r):s?(d=null,y=s.originalObject.data.originalData,c=s.x,E=s.x,f=s.y,T=s.y,h=l(s,n),_=s.weight,p=0,S=s.originalObject.data.weight,X=a):(d=u.originalObject.data.originalData,y=null,c=u.x,E=u.x,f=u.y,T=u.y,h=u.weight,_=l(u,e),p=u.originalObject.data.weight,S=0,X=o),Y.push({startingData:d,endingData:y,key:t,startingX:c,endingX:E,startingY:f,endingY:T,startingWeight:h,endingWeight:_,startingDataWeight:p,endingDataWeight:S,tweenType:X})}),b=!1}function l(t,n){var i=null;n.forEach(function(n){i||e.polygonContains(n,[t.x,t.y])&&(i=n)});var a,r=i.site,o=-(1/0);i.forEach(function(t){a=u([r.x,r.y],t),a>o&&(o=a)});var g=-o+r.weight;return g}const f=function(t){return t.id},h=function(t){return t.interpolatedSiteX},p=function(t){return t.interpolatedSiteY},s=function(t){return t.interpolatedSiteWeight},y=function(t){return w.clip()};var w=t,D=i,E=y,W=f,x=f,T=n.weightedVoronoi().x(h).y(p).weight(s),b=!0,j={},v={},O=new Set,Y=[];const _={mapInterpolator:function(){return function(t){b&&c();var n=Y.map(function(n){return{key:n.key,startingData:n.startingData,endingData:n.endingData,interpolatedSiteX:d(n.startingX,n.endingX,t),interpolatedSiteY:d(n.startingY,n.endingY,t),interpolatedSiteWeight:d(n.startingWeight,n.endingWeight,t),interpolatedDataWeight:d(n.startingDataWeight,n.endingDataWeight,t),tweenType:n.tweenType}});return T.clip(E(t))(n)}},clipInterpolator:function(t){return arguments.length?(E=t,b=!0,_):E},startingKey:function(t){return arguments.length?(W=t,b=!0,_):W},endingKey:function(t){return arguments.length?(x=t,b=!0,_):x}};return _}const a="enter",r="update",o="exit";t.voronoiMapTween=i,t.ENTER_TWEEN_TYPE=a,t.UPDATE_TWEEN_TYPE=r,t.EXIT_TWEEN_TYPE=o,Object.defineProperty(t,"__esModule",{value:!0})});