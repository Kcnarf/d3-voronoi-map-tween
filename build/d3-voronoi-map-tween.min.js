!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-weighted-voronoi")):"function"==typeof define&&define.amd?define(["exports","d3-weighted-voronoi"],n):n(t.d3=t.d3||{},t.d3)}(this,function(t,n){"use strict";function e(t,e){function o(t){return Math.pow(t,2)}function g(t,n){return o(n[0]-t[0])+o(n[1]-t[1])}function u(t,n,e){return(1-e)*t+e*n}function c(){const t=y.state().polygons,n=w.state().polygons,e=t.map(function(t){return t.site}),o=n.map(function(t){return t.site});var g;b={},e.forEach(function(t){g=E(t.originalObject.data.originalData),b[g]=t,O.add(g)}),j={},o.forEach(function(t){g=x(t.originalObject.data.originalData),j[g]=t,O.add(g)});var u,c,l,f,s,h,p,D,W,Y,_,S,X;v=[],O.forEach(function(e){u=b[e],p=j[e],u&&p?(c=u.originalObject.data.originalData,D=p.originalObject.data.originalData,l=u.x,W=p.x,f=u.y,Y=p.y,s=u.weight,_=p.weight,h=u.originalObject.data.weight,S=p.originalObject.data.weight,X=a):p?(c=null,D=p.originalObject.data.originalData,l=p.x,W=p.x,f=p.y,Y=p.y,s=d(p,t),_=p.weight,h=0,S=p.originalObject.data.weight,X=i):(c=u.originalObject.data.originalData,D=null,l=u.x,W=u.x,f=u.y,Y=u.y,s=u.weight,_=d(u,n),h=u.originalObject.data.weight,S=0,X=r),v.push({startingData:c,endingData:D,key:e,startingX:l,endingX:W,startingY:f,endingY:Y,startingWeight:s,endingWeight:_,startingDataWeight:h,endingDataWeight:S,tweenType:X})}),T=!1}function d(t,n){var e,i=1/0,a=null;n.forEach(function(n){e=g([n.site.x,n.site.y],[t.x,t.y]),e<i&&(i=e,a=n)});const r=a.site;var o=-(1/0);a.forEach(function(t){e=g([r.x,r.y],t),e>o&&(o=e)});const u=-o+r.weight;return u}const l=function(t){return t.id},f=function(t){return t.interpolatedSiteX},s=function(t){return t.interpolatedSiteY},h=function(t){return t.interpolatedSiteWeight},p=function(t){return y.clip()};var y=t,w=e,D=p,E=l,x=l,W=n.weightedVoronoi().x(f).y(s).weight(h),T=!0,b={},j={},O=new Set,v=[];const Y={mapInterpolator:function(){return function(t){T&&c();const n=v.map(function(n){return{key:n.key,startingData:n.startingData,endingData:n.endingData,interpolatedSiteX:u(n.startingX,n.endingX,t),interpolatedSiteY:u(n.startingY,n.endingY,t),interpolatedSiteWeight:u(n.startingWeight,n.endingWeight,t),interpolatedDataWeight:u(n.startingDataWeight,n.endingDataWeight,t),tweenType:n.tweenType}});return W.clip(D(t))(n)}},clipInterpolator:function(t){return arguments.length?(D=t,T=!0,Y):D},startingKey:function(t){return arguments.length?(E=t,T=!0,Y):E},endingKey:function(t){return arguments.length?(x=t,T=!0,Y):x}};return Y}const i="enter",a="update",r="exit";t.voronoiMapTween=e,t.ENTER_TWEEN_TYPE=i,t.UPDATE_TWEEN_TYPE=a,t.EXIT_TWEEN_TYPE=r,Object.defineProperty(t,"__esModule",{value:!0})});